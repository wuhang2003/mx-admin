import{e as re}from"./class-fe2c081a.js";import{gk as ye,n as A,ag as ge}from"./index-2f7b43b3.js";import{t as ve}from"./tslib.es6-f16173f3.js";const me=ye(ve);var f={};Object.defineProperty(f,"__esModule",{value:!0});var we=f.getLocalStorage=Ie=f.getLocalStorageOrThrow=je=f.getCrypto=Me=f.getCryptoOrThrow=Fe=f.getLocation=xe=f.getLocationOrThrow=Pe=f.getNavigator=Ce=f.getNavigatorOrThrow=Te=f.getDocument=_e=f.getDocumentOrThrow=be=f.getFromWindowOrThrow=Ee=f.getFromWindow=void 0;function C(t){let e;return typeof window<"u"&&typeof window[t]<"u"&&(e=window[t]),e}var Ee=f.getFromWindow=C;function D(t){const e=C(t);if(!e)throw new Error(`${t} is not defined in Window`);return e}var be=f.getFromWindowOrThrow=D;function Re(){return D("document")}var _e=f.getDocumentOrThrow=Re;function Oe(){return C("document")}var Te=f.getDocument=Oe;function Ae(){return D("navigator")}var Ce=f.getNavigatorOrThrow=Ae;function De(){return C("navigator")}var Pe=f.getNavigator=De;function Le(){return D("location")}var xe=f.getLocationOrThrow=Le;function Se(){return C("location")}var Fe=f.getLocation=Se;function Be(){return D("crypto")}var Me=f.getCryptoOrThrow=Be;function Ue(){return C("crypto")}var je=f.getCrypto=Ue;function Ne(){return D("localStorage")}var Ie=f.getLocalStorageOrThrow=Ne;function He(){return C("localStorage")}we=f.getLocalStorage=He;var H={};Object.defineProperty(H,"__esModule",{value:!0});var qe=H.getWindowMetadata=void 0;const k=f;function Je(){let t,e;try{t=k.getDocumentOrThrow(),e=k.getLocationOrThrow()}catch{return null}function o(){const g=t.getElementsByTagName("link"),w=[];for(let m=0;m<g.length;m++){const u=g[m],b=u.getAttribute("rel");if(b&&b.toLowerCase().indexOf("icon")>-1){const d=u.getAttribute("href");if(d)if(d.toLowerCase().indexOf("https:")===-1&&d.toLowerCase().indexOf("http:")===-1&&d.indexOf("//")!==0){let O=e.protocol+"//"+e.host;if(d.indexOf("/")===0)O+=d;else{const x=e.pathname.split("/");x.pop();const U=x.join("/");O+=U+"/"+d}w.push(O)}else if(d.indexOf("//")===0){const O=e.protocol+d;w.push(O)}else w.push(d)}}return w}function a(...g){const w=t.getElementsByTagName("meta");for(let m=0;m<w.length;m++){const u=w[m],b=["itemprop","property","name"].map(d=>u.getAttribute(d)).filter(d=>d?g.includes(d):!1);if(b.length&&b){const d=u.getAttribute("content");if(d)return d}}return""}function h(){let g=a("name","og:site_name","og:title","twitter:title");return g||(g=t.title),g}function s(){return a("description","og:description","twitter:description","keywords")}const l=h(),p=s(),B=e.origin,M=o();return{description:p,url:B,icons:M,name:l}}qe=H.getWindowMetadata=Je;var Et=t=>encodeURIComponent(t).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`),ne="%[a-f0-9]{2}",V=new RegExp("("+ne+")|([^%]+?)","gi"),G=new RegExp("("+ne+")+","gi");function I(t,e){try{return[decodeURIComponent(t.join(""))]}catch{}if(t.length===1)return t;e=e||1;var o=t.slice(0,e),a=t.slice(e);return Array.prototype.concat.call([],I(o),I(a))}function We(t){try{return decodeURIComponent(t)}catch{for(var e=t.match(V)||[],o=1;o<e.length;o++)t=I(e,o).join(""),e=t.match(V)||[];return t}}function $e(t){for(var e={"%FE%FF":"��","%FF%FE":"��"},o=G.exec(t);o;){try{e[o[0]]=decodeURIComponent(o[0])}catch{var a=We(o[0]);a!==o[0]&&(e[o[0]]=a)}o=G.exec(t)}e["%C2"]="�";for(var h=Object.keys(e),s=0;s<h.length;s++){var l=h[s];t=t.replace(new RegExp(l,"g"),e[l])}return t}var bt=function(t){if(typeof t!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch{return $e(t)}},Rt=(t,e)=>{if(!(typeof t=="string"&&typeof e=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(e==="")return[t];const o=t.indexOf(e);return o===-1?[t]:[t.slice(0,o),t.slice(o+e.length)]},_t=function(t,e){for(var o={},a=Object.keys(t),h=Array.isArray(e),s=0;s<a.length;s++){var l=a[s],p=t[l];(h?e.indexOf(l)!==-1:e(l,p,t))&&(o[l]=p)}return o};function ke(t){if(typeof t!="string")throw new Error(`Cannot safe json parse value of type ${typeof t}`);try{return JSON.parse(t)}catch{return t}}function X(t){return typeof t=="string"?t:JSON.stringify(t)}const Ve="PARSE_ERROR",Ge="INVALID_REQUEST",Xe="METHOD_NOT_FOUND",ze="INVALID_PARAMS",oe="INTERNAL_ERROR",q="SERVER_ERROR",Qe=[-32700,-32600,-32601,-32602,-32603],L={[Ve]:{code:-32700,message:"Parse error"},[Ge]:{code:-32600,message:"Invalid Request"},[Xe]:{code:-32601,message:"Method not found"},[ze]:{code:-32602,message:"Invalid params"},[oe]:{code:-32603,message:"Internal error"},[q]:{code:-32e3,message:"Server error"}},se=q;function Ke(t){return Qe.includes(t)}function z(t){return Object.keys(L).includes(t)?L[t]:L[se]}function Ye(t){const e=Object.values(L).find(o=>o.code===t);return e||L[se]}function Ze(t,e,o){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${o} RPC url at ${e}`):t}var et={},R={},Q;function tt(){if(Q)return R;Q=1,Object.defineProperty(R,"__esModule",{value:!0}),R.isBrowserCryptoAvailable=R.getSubtleCrypto=R.getBrowerCrypto=void 0;function t(){return(A===null||A===void 0?void 0:A.crypto)||(A===null||A===void 0?void 0:A.msCrypto)||{}}R.getBrowerCrypto=t;function e(){const a=t();return a.subtle||a.webkitSubtle}R.getSubtleCrypto=e;function o(){return!!t()&&!!e()}return R.isBrowserCryptoAvailable=o,R}var _={},K;function rt(){if(K)return _;K=1,Object.defineProperty(_,"__esModule",{value:!0}),_.isBrowser=_.isNode=_.isReactNative=void 0;function t(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}_.isReactNative=t;function e(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}_.isNode=e;function o(){return!t()&&!e()}return _.isBrowser=o,_}(function(t){Object.defineProperty(t,"__esModule",{value:!0});const e=me;e.__exportStar(tt(),t),e.__exportStar(rt(),t)})(et);function nt(){const t=Date.now()*Math.pow(10,3),e=Math.floor(Math.random()*Math.pow(10,3));return t+e}function ot(t,e,o){return{id:o||nt(),jsonrpc:"2.0",method:t,params:e}}function Ot(t,e){return{id:t,jsonrpc:"2.0",result:e}}function st(t,e,o){return{id:t,jsonrpc:"2.0",error:it(e,o)}}function it(t,e){return typeof t>"u"?z(oe):(typeof t=="string"&&(t=Object.assign(Object.assign({},z(q)),{message:t})),typeof e<"u"&&(t.data=e),Ke(t.code)&&(t=Ye(t.code)),t)}class ie{}class Tt extends ie{constructor(e){super()}}class at extends ie{constructor(){super()}}class ct extends at{constructor(e){super()}}const ft="^https?:",ut="^wss?:";function ht(t){const e=t.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function ae(t,e){const o=ht(t);return typeof o>"u"?!1:new RegExp(e).test(o)}function Y(t){return ae(t,ft)}function At(t){return ae(t,ut)}function Ct(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}function ce(t){return typeof t=="object"&&"id"in t&&"jsonrpc"in t&&t.jsonrpc==="2.0"}function Dt(t){return ce(t)&&"method"in t}function lt(t){return ce(t)&&(dt(t)||fe(t))}function dt(t){return"result"in t}function fe(t){return"error"in t}class Pt extends ct{constructor(e){super(e),this.events=new re.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,o){this.events.on(e,o)}once(e,o){this.events.once(e,o)}off(e,o){this.events.off(e,o)}removeListener(e,o){this.events.removeListener(e,o)}async request(e,o){return this.requestStrict(ot(e.method,e.params||[]),o)}async requestStrict(e,o){return new Promise(async(a,h)=>{if(!this.connection.connected)try{await this.open()}catch(s){h(s)}this.events.on(`${e.id}`,s=>{fe(s)?h(s.error):a(s.result)});try{await this.connection.send(e,o)}catch(s){h(s)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),lt(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var F={},pt={get exports(){return F},set exports(t){F=t}};(function(t,e){var o=typeof self<"u"?self:A,a=function(){function s(){this.fetch=!1,this.DOMException=o.DOMException}return s.prototype=o,new s}();(function(s){(function(l){var p={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function B(r){return r&&DataView.prototype.isPrototypeOf(r)}if(p.arrayBuffer)var M=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],J=ArrayBuffer.isView||function(r){return r&&M.indexOf(Object.prototype.toString.call(r))>-1};function g(r){if(typeof r!="string"&&(r=String(r)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(r))throw new TypeError("Invalid character in header field name");return r.toLowerCase()}function w(r){return typeof r!="string"&&(r=String(r)),r}function m(r){var n={next:function(){var i=r.shift();return{done:i===void 0,value:i}}};return p.iterable&&(n[Symbol.iterator]=function(){return n}),n}function u(r){this.map={},r instanceof u?r.forEach(function(n,i){this.append(i,n)},this):Array.isArray(r)?r.forEach(function(n){this.append(n[0],n[1])},this):r&&Object.getOwnPropertyNames(r).forEach(function(n){this.append(n,r[n])},this)}u.prototype.append=function(r,n){r=g(r),n=w(n);var i=this.map[r];this.map[r]=i?i+", "+n:n},u.prototype.delete=function(r){delete this.map[g(r)]},u.prototype.get=function(r){return r=g(r),this.has(r)?this.map[r]:null},u.prototype.has=function(r){return this.map.hasOwnProperty(g(r))},u.prototype.set=function(r,n){this.map[g(r)]=w(n)},u.prototype.forEach=function(r,n){for(var i in this.map)this.map.hasOwnProperty(i)&&r.call(n,this.map[i],i,this)},u.prototype.keys=function(){var r=[];return this.forEach(function(n,i){r.push(i)}),m(r)},u.prototype.values=function(){var r=[];return this.forEach(function(n){r.push(n)}),m(r)},u.prototype.entries=function(){var r=[];return this.forEach(function(n,i){r.push([i,n])}),m(r)},p.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);function b(r){if(r.bodyUsed)return Promise.reject(new TypeError("Already read"));r.bodyUsed=!0}function d(r){return new Promise(function(n,i){r.onload=function(){n(r.result)},r.onerror=function(){i(r.error)}})}function O(r){var n=new FileReader,i=d(n);return n.readAsArrayBuffer(r),i}function x(r){var n=new FileReader,i=d(n);return n.readAsText(r),i}function U(r){for(var n=new Uint8Array(r),i=new Array(n.length),v=0;v<n.length;v++)i[v]=String.fromCharCode(n[v]);return i.join("")}function W(r){if(r.slice)return r.slice(0);var n=new Uint8Array(r.byteLength);return n.set(new Uint8Array(r)),n.buffer}function $(){return this.bodyUsed=!1,this._initBody=function(r){this._bodyInit=r,r?typeof r=="string"?this._bodyText=r:p.blob&&Blob.prototype.isPrototypeOf(r)?this._bodyBlob=r:p.formData&&FormData.prototype.isPrototypeOf(r)?this._bodyFormData=r:p.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)?this._bodyText=r.toString():p.arrayBuffer&&p.blob&&B(r)?(this._bodyArrayBuffer=W(r.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):p.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(r)||J(r))?this._bodyArrayBuffer=W(r):this._bodyText=r=Object.prototype.toString.call(r):this._bodyText="",this.headers.get("content-type")||(typeof r=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(r)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob&&(this.blob=function(){var r=b(this);if(r)return r;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?b(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(O)}),this.text=function(){var r=b(this);if(r)return r;if(this._bodyBlob)return x(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(U(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(le)}),this.json=function(){return this.text().then(JSON.parse)},this}var ue=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function he(r){var n=r.toUpperCase();return ue.indexOf(n)>-1?n:r}function T(r,n){n=n||{};var i=n.body;if(r instanceof T){if(r.bodyUsed)throw new TypeError("Already read");this.url=r.url,this.credentials=r.credentials,n.headers||(this.headers=new u(r.headers)),this.method=r.method,this.mode=r.mode,this.signal=r.signal,!i&&r._bodyInit!=null&&(i=r._bodyInit,r.bodyUsed=!0)}else this.url=String(r);if(this.credentials=n.credentials||this.credentials||"same-origin",(n.headers||!this.headers)&&(this.headers=new u(n.headers)),this.method=he(n.method||this.method||"GET"),this.mode=n.mode||this.mode||null,this.signal=n.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function le(r){var n=new FormData;return r.trim().split("&").forEach(function(i){if(i){var v=i.split("="),y=v.shift().replace(/\+/g," "),c=v.join("=").replace(/\+/g," ");n.append(decodeURIComponent(y),decodeURIComponent(c))}}),n}function de(r){var n=new u,i=r.replace(/\r?\n[\t ]+/g," ");return i.split(/\r?\n/).forEach(function(v){var y=v.split(":"),c=y.shift().trim();if(c){var S=y.join(":").trim();n.append(c,S)}}),n}$.call(T.prototype);function E(r,n){n||(n={}),this.type="default",this.status=n.status===void 0?200:n.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in n?n.statusText:"OK",this.headers=new u(n.headers),this.url=n.url||"",this._initBody(r)}$.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},E.error=function(){var r=new E(null,{status:0,statusText:""});return r.type="error",r};var pe=[301,302,303,307,308];E.redirect=function(r,n){if(pe.indexOf(n)===-1)throw new RangeError("Invalid status code");return new E(null,{status:n,headers:{location:r}})},l.DOMException=s.DOMException;try{new l.DOMException}catch{l.DOMException=function(n,i){this.message=n,this.name=i;var v=Error(n);this.stack=v.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function j(r,n){return new Promise(function(i,v){var y=new T(r,n);if(y.signal&&y.signal.aborted)return v(new l.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function S(){c.abort()}c.onload=function(){var P={status:c.status,statusText:c.statusText,headers:de(c.getAllResponseHeaders()||"")};P.url="responseURL"in c?c.responseURL:P.headers.get("X-Request-URL");var N="response"in c?c.response:c.responseText;i(new E(N,P))},c.onerror=function(){v(new TypeError("Network request failed"))},c.ontimeout=function(){v(new TypeError("Network request failed"))},c.onabort=function(){v(new l.DOMException("Aborted","AbortError"))},c.open(y.method,y.url,!0),y.credentials==="include"?c.withCredentials=!0:y.credentials==="omit"&&(c.withCredentials=!1),"responseType"in c&&p.blob&&(c.responseType="blob"),y.headers.forEach(function(P,N){c.setRequestHeader(N,P)}),y.signal&&(y.signal.addEventListener("abort",S),c.onreadystatechange=function(){c.readyState===4&&y.signal.removeEventListener("abort",S)}),c.send(typeof y._bodyInit>"u"?null:y._bodyInit)})}return j.polyfill=!0,s.fetch||(s.fetch=j,s.Headers=u,s.Request=T,s.Response=E),l.Headers=u,l.Request=T,l.Response=E,l.fetch=j,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(a),a.fetch.ponyfill=!0,delete a.fetch.polyfill;var h=a;e=h.fetch,e.default=h.fetch,e.fetch=h.fetch,e.Headers=h.Headers,e.Request=h.Request,e.Response=h.Response,t.exports=e})(pt,F);const Z=ge(F),yt={Accept:"application/json","Content-Type":"application/json"},gt="POST",ee={headers:yt,method:gt},te=10;class Lt{constructor(e){if(this.url=e,this.events=new re.EventEmitter,this.isAvailable=!1,this.registering=!1,!Y(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,o){this.events.on(e,o)}once(e,o){this.events.once(e,o)}off(e,o){this.events.off(e,o)}removeListener(e,o){this.events.removeListener(e,o)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,o){this.isAvailable||await this.register();try{const a=X(e),s=await(await Z(this.url,Object.assign(Object.assign({},ee),{body:a}))).json();this.onPayload({data:s})}catch(a){this.onError(e.id,a)}}async register(e=this.url){if(!Y(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const o=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=o||this.events.listenerCount("open")>=o)&&this.events.setMaxListeners(o+1),new Promise((a,h)=>{this.events.once("register_error",s=>{this.resetMaxListeners(),h(s)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return h(new Error("HTTP connection is missing or invalid"));a()})})}this.url=e,this.registering=!0;try{const o=X({id:1,jsonrpc:"2.0",method:"test",params:[]});await Z(e,Object.assign(Object.assign({},ee),{body:o})),this.onOpen()}catch(o){const a=this.parseError(o);throw this.events.emit("register_error",a),this.onClose(),a}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const o=typeof e.data=="string"?ke(e.data):e.data;this.events.emit("payload",o)}onError(e,o){const a=this.parseError(o),h=a.message||a.toString(),s=st(e,h);this.events.emit("payload",s)}parseError(e,o=this.url){return Ze(e,o,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>te&&this.events.setMaxListeners(te)}}export{Ce as A,xe as B,Me as C,je as D,Ie as E,nt as F,Lt as H,Tt as I,Pt as J,Et as a,Fe as b,Te as c,bt as d,Pe as e,_t as f,qe as g,X as h,At as i,et as j,Ct as k,ke as l,st as m,Dt as n,Ot as o,Ze as p,dt as q,me as r,Rt as s,fe as t,lt as u,ot as v,we as w,Ee as x,be as y,_e as z};
