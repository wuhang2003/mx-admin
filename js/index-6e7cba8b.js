import{l as c,g as $,L as X,p as x,i as N,c as h,h as L,j as P,f as A,k as F,m as I,a as O,d as j,e as B,n as V,o as b,I as M,q as _,N as R}from"./codemirror-774ca4fe.js";import"./use-save-confirm-047676a4.js";import"./index-16475ff3.js";import"./toggle-fd814910.js";import"./use-react-21178bcb.js";import"./throttle-db193c59.js";import"./FormItem-75b86eaf.js";import"./Form-fca70984.js";import"./InputNumber-23d08215.js";import"./Remove-819d5b0b.js";import"./Add-35d80e3d.js";import"./Switch-ae9fbc5a.js";import"./Select-a04046d1.js";import"./Tag-1a092e84.js";const W=[c("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),c("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),c("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),c("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),c("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),c(`try {
	\${}
} catch (\${error}) {
	\${}
}`,{label:"try",detail:"/ catch block",type:"keyword"}),c("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),c(`if (\${}) {
	\${}
} else {
	\${}
}`,{label:"if",detail:"/ else block",type:"keyword"}),c(`class \${name} {
	constructor(\${params}) {
		\${}
	}
}`,{label:"class",detail:"definition",type:"keyword"}),c('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),c('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],w=new R,E=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function d(e){return(t,r)=>{let n=t.node.getChild("VariableDefinition");return n&&r(n,e),!0}}const q=["FunctionDeclaration"],H={FunctionDeclaration:d("function"),ClassDeclaration:d("class"),ClassExpression:()=>!0,EnumDeclaration:d("constant"),TypeAliasDeclaration:d("type"),NamespaceDeclaration:d("namespace"),VariableDefinition(e,t){e.matchContext(q)||t(e,"variable")},TypeDefinition(e,t){t(e,"type")},__proto__:null};function D(e,t){let r=w.get(t);if(r)return r;let n=[],a=!0;function o(i,s){let l=e.sliceString(i.from,i.to);n.push({label:l,type:s})}return t.cursor(M.IncludeAnonymous).iterate(i=>{if(a)a=!1;else if(i.name){let s=H[i.name];if(s&&s(i,o)||E.has(i.name))return!1}else if(i.to-i.from>8192){for(let s of D(e,i.node))n.push(s);return!1}}),w.set(t,n),n}const y=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,v=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName"];function Z(e){let t=$(e.state).resolveInner(e.pos,-1);if(v.indexOf(t.name)>-1)return null;let r=t.name=="VariableName"||t.to-t.from<20&&y.test(e.state.sliceDoc(t.from,t.to));if(!r&&!e.explicit)return null;let n=[];for(let a=t;a;a=a.parent)E.has(a.name)&&(n=n.concat(D(e.state.doc,a)));return{options:n,from:r?t.from:e.pos,validFor:y}}function S(e,t,r){var n;let a=[];for(;;){let o=t.firstChild,i;if(o?.name=="VariableName")return a.push(e(o)),{path:a.reverse(),name:r};if(o?.name=="MemberExpression"&&((n=i=o.lastChild)===null||n===void 0?void 0:n.name)=="PropertyName")a.push(e(i)),t=o;else return null}}function z(e){let t=n=>e.state.doc.sliceString(n.from,n.to),r=$(e.state).resolveInner(e.pos,-1);return r.name=="PropertyName"?S(t,r.parent,t(r)):v.indexOf(r.name)>-1?null:r.name=="VariableName"||r.to-r.from<20&&y.test(t(r))?{path:[],name:t(r)}:(r.name=="."||r.name=="?.")&&r.parent.name=="MemberExpression"?S(t,r.parent,""):r.name=="MemberExpression"?S(t,r,""):e.explicit?{path:[],name:""}:null}function G(e,t){let r=[],n=new Set;for(let a=0;;a++){for(let i of(Object.getOwnPropertyNames||Object.keys)(e)){if(n.has(i))continue;n.add(i);let s;try{s=e[i]}catch{continue}r.push({label:i,type:typeof s=="function"?/^[A-Z]/.test(i)?"class":t?"function":"method":t?"variable":"property",boost:-a})}let o=Object.getPrototypeOf(e);if(!o)return r;e=o}}function Se(e){let t=new Map;return r=>{let n=z(r);if(!n)return null;let a=e;for(let i of n.path)if(a=a[i],!a)return null;let o=t.get(a);return o||t.set(a,o=G(a,!n.path.length)),{from:r.pos-n.name.length,options:o,validFor:y}}}const f=X.define({name:"javascript",parser:x.configure({props:[N.add({IfStatement:h({except:/^\s*({|else\b)/}),TryStatement:h({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:L,SwitchBody:e=>{let t=e.textAfter,r=/^\s*\}/.test(t),n=/^\s*(case|default)\b/.test(t);return e.baseIndent+(r?0:n?1:2)*e.unit},Block:P({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null,"Statement Property":h({except:/^{/}),JSXElement(e){let t=/^\s*<\//.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},JSXEscape(e){let t=/\s*\}/.test(e.textAfter);return e.lineIndent(e.node.from)+(t?0:e.unit)},"JSXOpenTag JSXSelfClosingTag"(e){return e.column(e.node.from)+e.unit}}),A.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":F,BlockComment(e){return{from:e.from+2,to:e.to-2}}})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),J={test:e=>/^JSX/.test(e.name),facet:_({commentTokens:{block:{open:"{/*",close:"*/}"}}})},K=f.configure({dialect:"ts"},"typescript"),Q=f.configure({dialect:"jsx",props:[I.add(e=>e.isTop?[J]:void 0)]}),U=f.configure({dialect:"jsx ts",props:[I.add(e=>e.isTop?[J]:void 0)]},"typescript"),Y="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(e=>({label:e,type:"keyword"}));function $e(e={}){let t=e.jsx?e.typescript?U:Q:e.typescript?K:f;return new O(t,[f.data.of({autocomplete:j(v,B(W.concat(Y)))}),f.data.of({autocomplete:Z}),e.jsx?re:[]])}function ee(e){for(;;){if(e.name=="JSXOpenTag"||e.name=="JSXSelfClosingTag"||e.name=="JSXFragmentTag")return e;if(e.name=="JSXEscape"||!e.parent)return null;e=e.parent}}function C(e,t,r=e.length){for(let n=t?.firstChild;n;n=n.nextSibling)if(n.name=="JSXIdentifier"||n.name=="JSXBuiltin"||n.name=="JSXNamespacedName"||n.name=="JSXMemberExpression")return e.sliceString(n.from,Math.min(n.to,r));return""}function te(e){return e&&(e.name=="JSXEndTag"||e.name=="JSXSelfCloseEndTag")}const ne=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),re=V.inputHandler.of((e,t,r,n)=>{if((ne?e.composing:e.compositionStarted)||e.state.readOnly||t!=r||n!=">"&&n!="/"||!f.isActiveAt(e.state,t,-1))return!1;let{state:a}=e,o=a.changeByRange(i=>{var s;let{head:l}=i,p=$(a).resolveInner(l,-1),m;if(p.name=="JSXStartTag"&&(p=p.parent),!(p.name=="JSXAttributeValue"&&p.to>l)){if(n==">"&&p.name=="JSXFragmentTag")return{range:b.cursor(l+1),changes:{from:l,insert:"></>"}};if(n=="/"&&p.name=="JSXFragmentTag"){let u=p.parent,g=u?.parent;if(u.from==l-1&&((s=g.lastChild)===null||s===void 0?void 0:s.name)!="JSXEndTag"&&(m=C(a.doc,g?.firstChild,l))){let k=`/${m}>`;return{range:b.cursor(l+k.length),changes:{from:l,insert:k}}}}else if(n==">"){let u=ee(p);if(u&&!te(u.lastChild)&&a.sliceDoc(l,l+2)!="</"&&(m=C(a.doc,u,l)))return{range:b.cursor(l+1),changes:{from:l,insert:`></${m}>`}}}}return{range:i}});return o.changes.empty?!1:(e.dispatch(o,{userEvent:"input.type",scrollIntoView:!0}),!0)});function ve(e,t){return t||(t={parserOptions:{ecmaVersion:2019,sourceType:"module"},env:{browser:!0,node:!0,es6:!0,es2015:!0,es2017:!0,es2020:!0},rules:{}},e.getRules().forEach((r,n)=>{r.meta.docs.recommended&&(t.rules[n]=2)})),r=>{let{state:n}=r,a=[];for(let{from:o,to:i}of f.findRegions(n)){let s=n.doc.lineAt(o),l={line:s.number-1,col:o-s.from,pos:o};for(let p of e.verify(n.sliceDoc(o,i),t))a.push(ae(p,n.doc,l))}return a}}function T(e,t,r,n){return r.line(e+n.line).from+t+(e==1?n.col-1:-1)}function ae(e,t,r){let n=T(e.line,e.column,t,r),a={from:n,to:e.endLine!=null&&e.endColumn!=1?T(e.endLine,e.endColumn,t,r):n,message:e.message,source:e.ruleId?"eslint:"+e.ruleId:"eslint",severity:e.severity==1?"warning":"error"};if(e.fix){let{range:o,text:i}=e.fix,s=o[0]+r.pos-n,l=o[1]+r.pos-n;a.actions=[{name:"fix",apply(p,m){p.dispatch({changes:{from:m+s,to:m+l,insert:i},scrollIntoView:!0})}}]}return a}export{re as autoCloseTags,z as completionPath,ve as esLint,$e as javascript,f as javascriptLanguage,Q as jsxLanguage,Z as localCompletionSource,Se as scopeCompletionSource,W as snippets,U as tsxLanguage,K as typescriptLanguage};
