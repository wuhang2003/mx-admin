import{L as _,j as D,i as L,f as z,k as F,l as V,m as B,b as G,n as M,o as P,q as R,s as E,r as S}from"./codemirror-a2e764fa.js";import"./use-save-confirm-a2fbb639.js";import"./index-3c95053e.js";import"./toggle-39aa65af.js";import"./use-react-aa36ef57.js";import"./throttle-d02e3100.js";import"./FormItem-4a41af9c.js";import"./Form-a73db28e.js";import"./InputNumber-8dd0a70c.js";import"./Remove-ad107eb7.js";import"./Add-06359a2d.js";import"./Switch-9ade454a.js";import"./Select-f4a51811.js";import"./Tag-e0bc3d96.js";const y=["_blank","_self","_top","_parent"],T=["ascii","utf-8","utf-16","latin1","latin1"],k=["get","post","put","delete"],C=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],c=["true","false"],l={},U={a:{attrs:{href:null,ping:null,type:null,media:null,target:y,hreflang:null}},abbr:l,acronym:l,address:l,applet:l,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:l,aside:l,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:l,base:{attrs:{href:null,target:y}},basefont:l,bdi:l,bdo:l,big:l,blockquote:{attrs:{cite:null}},body:l,br:l,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:C,formmethod:k,formnovalidate:["novalidate"],formtarget:y,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:l,center:l,cite:l,code:l,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:l,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:l,dir:l,div:l,dl:l,dt:l,em:l,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:l,figure:l,font:l,footer:l,form:{attrs:{action:null,name:null,"accept-charset":T,autocomplete:["on","off"],enctype:C,method:k,novalidate:["novalidate"],target:y}},frame:l,frameset:l,h1:l,h2:l,h3:l,h4:l,h5:l,h6:l,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:l,hgroup:l,hr:l,html:{attrs:{manifest:null}},i:l,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:C,formmethod:k,formnovalidate:["novalidate"],formtarget:y,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:l,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:l,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:l,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:T,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:l,noframes:l,noscript:l,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:l,param:{attrs:{name:null,value:null}},pre:l,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:l,rt:l,ruby:l,s:l,samp:l,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:T}},section:l,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:l,source:{attrs:{src:null,type:null,media:null}},span:l,strike:l,strong:l,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:l,summary:l,sup:l,table:l,tbody:l,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:l,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:l,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:l,time:{attrs:{datetime:null}},title:l,tr:l,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},tt:l,u:l,ul:{children:["li","script","template","ul","ol"]},var:l,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:l},W={accesskey:null,class:null,contenteditable:c,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:c,autocorrect:c,autocapitalize:c,style:null,tabindex:null,title:null,translate:["yes","no"],onclick:null,rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":c,"aria-autocomplete":["inline","list","both","none"],"aria-busy":c,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":c,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":c,"aria-hidden":c,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":c,"aria-multiselectable":c,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":c,"aria-relevant":null,"aria-required":c,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null};class v{constructor(a,n){this.tags=Object.assign(Object.assign({},U),a),this.globalAttrs=Object.assign(Object.assign({},W),n),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}v.default=new v;function h(e,a,n=e.length){if(!a)return"";let t=a.firstChild,o=t&&t.getChild("TagName");return o?e.sliceString(o.from,Math.min(o.to,n)):""}function w(e,a=!1){for(let n=e.parent;n;n=n.parent)if(n.name=="Element")if(a)a=!1;else return n;return null}function $(e,a,n){let t=n.tags[h(e,w(a,!0))];return t?.children||n.allTags}function A(e,a){let n=[];for(let t=a;t=w(t);){let o=h(e,t);if(o&&t.lastChild.name=="CloseTag")break;o&&n.indexOf(o)<0&&(a.name=="EndTag"||a.from>=t.firstChild.to)&&n.push(o)}return n}const q=/^[:\-\.\w\u00b7-\uffff]*$/;function O(e,a,n,t,o){let r=/\s*>/.test(e.sliceDoc(o,o+5))?"":">";return{from:t,to:o,options:$(e.doc,n,a).map(s=>({label:s,type:"type"})).concat(A(e.doc,n).map((s,d)=>({label:"/"+s,apply:"/"+s+r,type:"type",boost:99-d}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function j(e,a,n,t){let o=/\s*>/.test(e.sliceDoc(t,t+5))?"":">";return{from:n,to:t,options:A(e.doc,a).map((r,s)=>({label:r,apply:r+o,type:"type",boost:99-s})),validFor:q}}function H(e,a,n,t){let o=[],r=0;for(let s of $(e.doc,n,a))o.push({label:"<"+s,type:"type"});for(let s of A(e.doc,n))o.push({label:"</"+s+">",type:"type",boost:99-r++});return{from:t,to:t,options:o,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}function J(e,a,n,t,o){let r=w(n),s=r?a.tags[h(e.doc,r)]:null,d=s&&s.attrs?Object.keys(s.attrs).concat(a.globalAttrNames):a.globalAttrNames;return{from:t,to:o,options:d.map(u=>({label:u,type:"property"})),validFor:q}}function K(e,a,n,t,o){var r;let s=(r=n.parent)===null||r===void 0?void 0:r.getChild("AttributeName"),d=[],u;if(s){let g=e.sliceDoc(s.from,s.to),m=a.globalAttrs[g];if(!m){let i=w(n),p=i?a.tags[h(e.doc,i)]:null;m=p?.attrs&&p.attrs[g]}if(m){let i=e.sliceDoc(t,o).toLowerCase(),p='"',f='"';/^['"]/.test(i)?(u=i[0]=='"'?/^[^"]*$/:/^[^']*$/,p="",f=e.sliceDoc(o,o+1)==i[0]?"":i[0],i=i.slice(1),t++):u=/^[^\s<>='"]*$/;for(let b of m)d.push({label:b,apply:p+b+f,type:"constant"})}}return{from:t,to:o,options:d,validFor:u}}function I(e,a){let{state:n,pos:t}=a,o=E(n).resolveInner(t),r=o.resolve(t,-1);for(let s=t,d;o==r&&(d=r.childBefore(s));){let u=d.lastChild;if(!u||!u.type.isError||u.from<u.to)break;o=r=d,s=u.from}return r.name=="TagName"?r.parent&&/CloseTag$/.test(r.parent.name)?j(n,r,r.from,t):O(n,e,r,r.from,t):r.name=="StartTag"?O(n,e,r,t,t):r.name=="StartCloseTag"||r.name=="IncompleteCloseTag"?j(n,r,t,t):a.explicit&&(r.name=="OpenTag"||r.name=="SelfClosingTag")||r.name=="AttributeName"?J(n,e,r,r.name=="AttributeName"?r.from:t,t):r.name=="Is"||r.name=="AttributeValue"||r.name=="UnquotedAttributeValue"?K(n,e,r,r.name=="Is"?t:r.from,t):a.explicit&&(o.name=="Element"||o.name=="Text"||o.name=="Document")?H(n,e,r,t):null}function ce(e){return I(v.default,e)}function Q(e){let{extraTags:a,extraGlobalAttributes:n}=e,t=n||a?new v(a,n):v.default;return o=>I(t,o)}const x=_.define({parser:D.configure({props:[L.add({Element(e){let a=/^(\s*)(<\/)?/.exec(e.textAfter);return e.node.to<=e.pos+a[0].length?e.continue():e.lineIndent(e.node.from)+(a[2]?0:e.unit)},"OpenTag CloseTag SelfClosingTag"(e){return e.column(e.node.from)+e.unit},Document(e){if(e.pos+/\s*/.exec(e.textAfter)[0].length<e.node.to)return e.continue();let a=null,n;for(let t=e.node;;){let o=t.lastChild;if(!o||o.name!="Element"||o.to!=t.to)break;a=t=o}return a&&!((n=a.lastChild)&&(n.name=="CloseTag"||n.name=="SelfClosingTag"))?e.lineIndent(a.from)+e.unit:null}}),z.add({Element(e){let a=e.firstChild,n=e.lastChild;return!a||a.name!="OpenTag"?null:{from:a.to,to:n.name=="CloseTag"?n.from:e.to}}})],wrap:F([{tag:"script",attrs(e){return!e.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(e.type)},parser:V.parser},{tag:"style",attrs(e){return(!e.lang||e.lang=="css")&&(!e.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(e.type))},parser:B.parser}])}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}});function pe(e={}){let a=x;return e.matchClosingTags===!1&&(a=a.configure({dialect:"noMatch"})),new G(a,[x.data.of({autocomplete:Q(e)}),e.autoCloseTags!==!1?X:[],M().support,P().support])}const X=R.inputHandler.of((e,a,n,t)=>{if(e.composing||e.state.readOnly||a!=n||t!=">"&&t!="/"||!x.isActiveAt(e.state,a,-1))return!1;let{state:o}=e,r=o.changeByRange(s=>{var d,u,g;let{head:m}=s,i=E(o).resolveInner(m,-1),p;if((i.name=="TagName"||i.name=="StartTag")&&(i=i.parent),t==">"&&i.name=="OpenTag"){if(((u=(d=i.parent)===null||d===void 0?void 0:d.lastChild)===null||u===void 0?void 0:u.name)!="CloseTag"&&(p=h(o.doc,i.parent,m)))return{range:S.cursor(m+1),changes:{from:m,insert:`></${p}>`}}}else if(t=="/"&&i.name=="OpenTag"){let f=i.parent,b=f?.parent;if(f.from==m-1&&((g=b.lastChild)===null||g===void 0?void 0:g.name)!="CloseTag"&&(p=h(o.doc,b,m))){let N=`/${p}>`;return{range:S.cursor(m+N.length),changes:{from:m,insert:N}}}}return{range:s}});return r.changes.empty?!1:(e.dispatch(r,{userEvent:"input.type",scrollIntoView:!0}),!0)});export{X as autoCloseTags,pe as html,ce as htmlCompletionSource,Q as htmlCompletionSourceWith,x as htmlLanguage};
