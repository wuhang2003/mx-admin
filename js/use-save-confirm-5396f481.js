import{g as u,C as l}from"./use-store-ref-095f705c.js";import{R as v,ar as d}from"./Button-5ec267f1.js";const C=(r,i,n="文章未保存是否确定离开？")=>{const t=e=>{if(!i())return e.preventDefault(),e.returnValue=n,!1};v(()=>{r&&window.addEventListener("beforeunload",t)}),d(()=>{r&&window.removeEventListener("beforeunload",t)});const a=u();l(async(e,c,o)=>{if(!r){o();return}if(i()){o();return}if(e.hash=="|publish"){o();return}const f=new Promise((s,w)=>{a.warning({title:n,negativeText:"嗯",positiveText:"手抖了啦",onNegativeClick(){s(!0)},onPositiveClick(){s(!1)}})});await Promise.resolve(f)&&o()})};export{C as u};
