import{t as ft}from"./throttle-0ce18ecc.js";import{k as $,ag as ut,ah as ct,ai as pt,B as lt,au as dt,aq as ht,U as E,aO as yt,bs as gt,br as Z,F as vt}from"./Button-5ec267f1.js";import{I as St,z as Ot,N as At,n as mt}from"./use-store-ref-095f705c.js";import{N as k}from"./FormItem-32059e79.js";import{N as xt}from"./InputNumber-5d4e37b9.js";import{N as Mt}from"./Switch-82196aed.js";const _t={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Tt=pt("path",{d:"M256 48C141.31 48 48 141.32 48 256c0 114.86 93.14 208 208 208c114.69 0 208-93.31 208-208c0-114.87-93.13-208-208-208zm0 313a94 94 0 0 1 0-188h4.21l-14.11-14.1a14 14 0 0 1 19.8-19.8l40 40a14 14 0 0 1 0 19.8l-40 40a14 14 0 0 1-19.8-19.8l18-18c-2.38-.1-5.1-.1-8.1-.1a66 66 0 1 0 66 66a14 14 0 0 1 28 0a94.11 94.11 0 0 1-94 94z",fill:"currentColor"},null,-1),Et=[Tt],Ct=$({name:"RefreshCircle",render:function(t,n){return ut(),ct("svg",_t,Et)}}),It="_editor_19kch_1",bt="_loading_19kch_1",gn={editor:It,loading:bt},vn={text:{type:String,required:!0},onChange:{type:Function,required:!0},unSaveConfirm:{type:Boolean,default:!0}};var y;(function(r){r[r.PLAIN_TO_CLASS=0]="PLAIN_TO_CLASS",r[r.CLASS_TO_PLAIN=1]="CLASS_TO_PLAIN",r[r.CLASS_TO_CLASS=2]="CLASS_TO_CLASS"})(y||(y={}));var Nt=function(){function r(){this._typeMetadatas=new Map,this._transformMetadatas=new Map,this._exposeMetadatas=new Map,this._excludeMetadatas=new Map,this._ancestorsMap=new Map}return r.prototype.addTypeMetadata=function(t){this._typeMetadatas.has(t.target)||this._typeMetadatas.set(t.target,new Map),this._typeMetadatas.get(t.target).set(t.propertyName,t)},r.prototype.addTransformMetadata=function(t){this._transformMetadatas.has(t.target)||this._transformMetadatas.set(t.target,new Map),this._transformMetadatas.get(t.target).has(t.propertyName)||this._transformMetadatas.get(t.target).set(t.propertyName,[]),this._transformMetadatas.get(t.target).get(t.propertyName).push(t)},r.prototype.addExposeMetadata=function(t){this._exposeMetadatas.has(t.target)||this._exposeMetadatas.set(t.target,new Map),this._exposeMetadatas.get(t.target).set(t.propertyName,t)},r.prototype.addExcludeMetadata=function(t){this._excludeMetadatas.has(t.target)||this._excludeMetadatas.set(t.target,new Map),this._excludeMetadatas.get(t.target).set(t.propertyName,t)},r.prototype.findTransformMetadatas=function(t,n,e){return this.findMetadatas(this._transformMetadatas,t,n).filter(function(o){return!o.options||o.options.toClassOnly===!0&&o.options.toPlainOnly===!0?!0:o.options.toClassOnly===!0?e===y.CLASS_TO_CLASS||e===y.PLAIN_TO_CLASS:o.options.toPlainOnly===!0?e===y.CLASS_TO_PLAIN:!0})},r.prototype.findExcludeMetadata=function(t,n){return this.findMetadata(this._excludeMetadatas,t,n)},r.prototype.findExposeMetadata=function(t,n){return this.findMetadata(this._exposeMetadatas,t,n)},r.prototype.findExposeMetadataByCustomName=function(t,n){return this.getExposedMetadatas(t).find(function(e){return e.options&&e.options.name===n})},r.prototype.findTypeMetadata=function(t,n){return this.findMetadata(this._typeMetadatas,t,n)},r.prototype.getStrategy=function(t){var n=this._excludeMetadatas.get(t),e=n&&n.get(void 0),o=this._exposeMetadatas.get(t),i=o&&o.get(void 0);return e&&i||!e&&!i?"none":e?"excludeAll":"exposeAll"},r.prototype.getExposedMetadatas=function(t){return this.getMetadata(this._exposeMetadatas,t)},r.prototype.getExcludedMetadatas=function(t){return this.getMetadata(this._excludeMetadatas,t)},r.prototype.getExposedProperties=function(t,n){return this.getExposedMetadatas(t).filter(function(e){return!e.options||e.options.toClassOnly===!0&&e.options.toPlainOnly===!0?!0:e.options.toClassOnly===!0?n===y.CLASS_TO_CLASS||n===y.PLAIN_TO_CLASS:e.options.toPlainOnly===!0?n===y.CLASS_TO_PLAIN:!0}).map(function(e){return e.propertyName})},r.prototype.getExcludedProperties=function(t,n){return this.getExcludedMetadatas(t).filter(function(e){return!e.options||e.options.toClassOnly===!0&&e.options.toPlainOnly===!0?!0:e.options.toClassOnly===!0?n===y.CLASS_TO_CLASS||n===y.PLAIN_TO_CLASS:e.options.toPlainOnly===!0?n===y.CLASS_TO_PLAIN:!0}).map(function(e){return e.propertyName})},r.prototype.clear=function(){this._typeMetadatas.clear(),this._exposeMetadatas.clear(),this._excludeMetadatas.clear(),this._ancestorsMap.clear()},r.prototype.getMetadata=function(t,n){var e=t.get(n),o;e&&(o=Array.from(e.values()).filter(function(l){return l.propertyName!==void 0}));for(var i=[],s=0,a=this.getAncestors(n);s<a.length;s++){var c=a[s],u=t.get(c);if(u){var p=Array.from(u.values()).filter(function(l){return l.propertyName!==void 0});i.push.apply(i,p)}}return i.concat(o||[])},r.prototype.findMetadata=function(t,n,e){var o=t.get(n);if(o){var i=o.get(e);if(i)return i}for(var s=0,a=this.getAncestors(n);s<a.length;s++){var c=a[s],u=t.get(c);if(u){var p=u.get(e);if(p)return p}}},r.prototype.findMetadatas=function(t,n,e){var o=t.get(n),i;o&&(i=o.get(e));for(var s=[],a=0,c=this.getAncestors(n);a<c.length;a++){var u=c[a],p=t.get(u);p&&p.has(e)&&s.push.apply(s,p.get(e))}return s.slice().reverse().concat((i||[]).slice().reverse())},r.prototype.getAncestors=function(t){if(!t)return[];if(!this._ancestorsMap.has(t)){for(var n=[],e=Object.getPrototypeOf(t.prototype.constructor);typeof e.prototype<"u";e=Object.getPrototypeOf(e.prototype.constructor))n.push(e);this._ancestorsMap.set(t,n)}return this._ancestorsMap.get(t)},r}(),C=new Nt;function Lt(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}function wt(r){return r!==null&&typeof r=="object"&&typeof r.then=="function"}var K=globalThis&&globalThis.__spreadArray||function(r,t,n){if(n||arguments.length===2)for(var e=0,o=t.length,i;e<o;e++)(i||!(e in t))&&(i||(i=Array.prototype.slice.call(t,0,e)),i[e]=t[e]);return r.concat(i||Array.prototype.slice.call(t))};function Pt(r){var t=new r;return!(t instanceof Set)&&!("push"in t)?[]:t}var w=function(){function r(t,n){this.transformationType=t,this.options=n,this.recursionStack=new Set}return r.prototype.transform=function(t,n,e,o,i,s){var a=this;if(s===void 0&&(s=0),Array.isArray(n)||n instanceof Set){var c=o&&this.transformationType===y.PLAIN_TO_CLASS?Pt(o):[];return n.forEach(function(g,m){var v=t?t[m]:void 0;if(!a.options.enableCircularCheck||!a.isCircular(g)){var x=void 0;if(typeof e!="function"&&e&&e.options&&e.options.discriminator&&e.options.discriminator.property&&e.options.discriminator.subTypes){if(a.transformationType===y.PLAIN_TO_CLASS){x=e.options.discriminator.subTypes.find(function(T){return T.name===g[e.options.discriminator.property]});var h={newObject:c,object:g,property:void 0},d=e.typeFunction(h);x===void 0?x=d:x=x.value,e.options.keepDiscriminatorProperty||delete g[e.options.discriminator.property]}a.transformationType===y.CLASS_TO_CLASS&&(x=g.constructor),a.transformationType===y.CLASS_TO_PLAIN&&(g[e.options.discriminator.property]=e.options.discriminator.subTypes.find(function(T){return T.value===g.constructor}).name)}else x=e;var O=a.transform(v,g,x,void 0,g instanceof Map,s+1);c instanceof Set?c.add(O):c.push(O)}else a.transformationType===y.CLASS_TO_CLASS&&(c instanceof Set?c.add(g):c.push(g))}),c}else{if(e===String&&!i)return n==null?n:String(n);if(e===Number&&!i)return n==null?n:Number(n);if(e===Boolean&&!i)return n==null?n:Boolean(n);if((e===Date||n instanceof Date)&&!i)return n instanceof Date?new Date(n.valueOf()):n==null?n:new Date(n);if(Lt().Buffer&&(e===Buffer||n instanceof Buffer)&&!i)return n==null?n:Buffer.from(n);if(wt(n)&&!i)return new Promise(function(g,m){n.then(function(v){return g(a.transform(void 0,v,e,void 0,void 0,s+1))},m)});if(!i&&n!==null&&typeof n=="object"&&typeof n.then=="function")return n;if(typeof n=="object"&&n!==null){!e&&n.constructor!==Object&&(!Array.isArray(n)&&n.constructor===Array||(e=n.constructor)),!e&&t&&(e=t.constructor),this.options.enableCircularCheck&&this.recursionStack.add(n);var u=this.getKeys(e,n,i),p=t||{};!t&&(this.transformationType===y.PLAIN_TO_CLASS||this.transformationType===y.CLASS_TO_CLASS)&&(i?p=new Map:e?p=new e:p={});for(var l=function(g){if(g==="__proto__"||g==="constructor")return"continue";var m=g,v=g,x=g;if(!f.options.ignoreDecorators&&e){if(f.transformationType===y.PLAIN_TO_CLASS){var h=C.findExposeMetadataByCustomName(e,g);h&&(x=h.propertyName,v=h.propertyName)}else if(f.transformationType===y.CLASS_TO_PLAIN||f.transformationType===y.CLASS_TO_CLASS){var h=C.findExposeMetadata(e,g);h&&h.options&&h.options.name&&(v=h.options.name)}}var d=void 0;f.transformationType===y.PLAIN_TO_CLASS?d=n[m]:n instanceof Map?d=n.get(m):n[m]instanceof Function?d=n[m]():d=n[m];var O=void 0,T=d instanceof Map;if(e&&i)O=e;else if(e){var S=C.findTypeMetadata(e,x);if(S){var U={newObject:p,object:n,property:x},F=S.typeFunction?S.typeFunction(U):S.reflectedType;S.options&&S.options.discriminator&&S.options.discriminator.property&&S.options.discriminator.subTypes?n[m]instanceof Array?O=S:(f.transformationType===y.PLAIN_TO_CLASS&&(O=S.options.discriminator.subTypes.find(function(L){if(d&&d instanceof Object&&S.options.discriminator.property in d)return L.name===d[S.options.discriminator.property]}),O===void 0?O=F:O=O.value,S.options.keepDiscriminatorProperty||d&&d instanceof Object&&S.options.discriminator.property in d&&delete d[S.options.discriminator.property]),f.transformationType===y.CLASS_TO_CLASS&&(O=d.constructor),f.transformationType===y.CLASS_TO_PLAIN&&d&&(d[S.options.discriminator.property]=S.options.discriminator.subTypes.find(function(L){return L.value===d.constructor}).name)):O=F,T=T||S.reflectedType===Map}else if(f.options.targetMaps)f.options.targetMaps.filter(function(L){return L.target===e&&!!L.properties[x]}).forEach(function(L){return O=L.properties[x]});else if(f.options.enableImplicitConversion&&f.transformationType===y.PLAIN_TO_CLASS){var W=Reflect.getMetadata("design:type",e.prototype,x);W&&(O=W)}}var Y=Array.isArray(n[m])?f.getReflectedType(e,x):void 0,Q=t?t[m]:void 0;if(p.constructor.prototype){var X=Object.getOwnPropertyDescriptor(p.constructor.prototype,v);if((f.transformationType===y.PLAIN_TO_CLASS||f.transformationType===y.CLASS_TO_CLASS)&&(X&&!X.set||p[v]instanceof Function))return"continue"}if(!f.options.enableCircularCheck||!f.isCircular(d)){var D=f.transformationType===y.PLAIN_TO_CLASS?v:g,A=void 0;f.transformationType===y.CLASS_TO_PLAIN?(A=n[D],A=f.applyCustomTransformations(A,e,D,n,f.transformationType),A=n[D]===A?d:A,A=f.transform(Q,A,O,Y,T,s+1)):d===void 0&&f.options.exposeDefaultValues?A=p[v]:(A=f.transform(Q,d,O,Y,T,s+1),A=f.applyCustomTransformations(A,e,D,n,f.transformationType)),(A!==void 0||f.options.exposeUnsetFields)&&(p instanceof Map?p.set(v,A):p[v]=A)}else if(f.transformationType===y.CLASS_TO_CLASS){var A=d;A=f.applyCustomTransformations(A,e,g,n,f.transformationType),(A!==void 0||f.options.exposeUnsetFields)&&(p instanceof Map?p.set(v,A):p[v]=A)}},f=this,M=0,_=u;M<_.length;M++){var N=_[M];l(N)}return this.options.enableCircularCheck&&this.recursionStack.delete(n),p}else return n}},r.prototype.applyCustomTransformations=function(t,n,e,o,i){var s=this,a=C.findTransformMetadatas(n,e,this.transformationType);return this.options.version!==void 0&&(a=a.filter(function(c){return c.options?s.checkVersion(c.options.since,c.options.until):!0})),this.options.groups&&this.options.groups.length?a=a.filter(function(c){return c.options?s.checkGroups(c.options.groups):!0}):a=a.filter(function(c){return!c.options||!c.options.groups||!c.options.groups.length}),a.forEach(function(c){t=c.transformFn({value:t,key:e,obj:o,type:i,options:s.options})}),t},r.prototype.isCircular=function(t){return this.recursionStack.has(t)},r.prototype.getReflectedType=function(t,n){if(t){var e=C.findTypeMetadata(t,n);return e?e.reflectedType:void 0}},r.prototype.getKeys=function(t,n,e){var o=this,i=C.getStrategy(t);i==="none"&&(i=this.options.strategy||"exposeAll");var s=[];if((i==="exposeAll"||e)&&(n instanceof Map?s=Array.from(n.keys()):s=Object.keys(n)),e)return s;if(this.options.ignoreDecorators&&this.options.excludeExtraneousValues&&t){var a=C.getExposedProperties(t,this.transformationType),c=C.getExcludedProperties(t,this.transformationType);s=K(K([],a,!0),c,!0)}if(!this.options.ignoreDecorators&&t){var a=C.getExposedProperties(t,this.transformationType);this.transformationType===y.PLAIN_TO_CLASS&&(a=a.map(function(l){var f=C.findExposeMetadata(t,l);return f&&f.options&&f.options.name?f.options.name:l})),this.options.excludeExtraneousValues?s=a:s=s.concat(a);var u=C.getExcludedProperties(t,this.transformationType);u.length>0&&(s=s.filter(function(l){return!u.includes(l)})),this.options.version!==void 0&&(s=s.filter(function(l){var f=C.findExposeMetadata(t,l);return!f||!f.options?!0:o.checkVersion(f.options.since,f.options.until)})),this.options.groups&&this.options.groups.length?s=s.filter(function(l){var f=C.findExposeMetadata(t,l);return!f||!f.options?!0:o.checkGroups(f.options.groups)}):s=s.filter(function(l){var f=C.findExposeMetadata(t,l);return!f||!f.options||!f.options.groups||!f.options.groups.length})}return this.options.excludePrefixes&&this.options.excludePrefixes.length&&(s=s.filter(function(p){return o.options.excludePrefixes.every(function(l){return p.substr(0,l.length)!==l})})),s=s.filter(function(p,l,f){return f.indexOf(p)===l}),s},r.prototype.checkVersion=function(t,n){var e=!0;return e&&t&&(e=this.options.version>=t),e&&n&&(e=this.options.version<n),e},r.prototype.checkGroups=function(t){return t?this.options.groups.some(function(n){return t.includes(n)}):!0},r}(),P={enableCircularCheck:!1,enableImplicitConversion:!1,excludeExtraneousValues:!1,excludePrefixes:void 0,exposeDefaultValues:!1,exposeUnsetFields:!0,groups:void 0,ignoreDecorators:!1,strategy:void 0,targetMaps:void 0,version:void 0},I=globalThis&&globalThis.__assign||function(){return I=Object.assign||function(r){for(var t,n=1,e=arguments.length;n<e;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},I.apply(this,arguments)},Vt=function(){function r(){}return r.prototype.instanceToPlain=function(t,n){var e=new w(y.CLASS_TO_PLAIN,I(I({},P),n));return e.transform(void 0,t,void 0,void 0,void 0,void 0)},r.prototype.classToPlainFromExist=function(t,n,e){var o=new w(y.CLASS_TO_PLAIN,I(I({},P),e));return o.transform(n,t,void 0,void 0,void 0,void 0)},r.prototype.plainToInstance=function(t,n,e){var o=new w(y.PLAIN_TO_CLASS,I(I({},P),e));return o.transform(void 0,n,t,void 0,void 0,void 0)},r.prototype.plainToClassFromExist=function(t,n,e){var o=new w(y.PLAIN_TO_CLASS,I(I({},P),e));return o.transform(t,n,void 0,void 0,void 0,void 0)},r.prototype.instanceToInstance=function(t,n){var e=new w(y.CLASS_TO_CLASS,I(I({},P),n));return e.transform(void 0,t,void 0,void 0,void 0,void 0)},r.prototype.classToClassFromExist=function(t,n,e){var o=new w(y.CLASS_TO_CLASS,I(I({},P),e));return o.transform(n,t,void 0,void 0,void 0,void 0)},r.prototype.serialize=function(t,n){return JSON.stringify(this.instanceToPlain(t,n))},r.prototype.deserialize=function(t,n,e){var o=JSON.parse(n);return this.plainToInstance(t,o,e)},r.prototype.deserializeArray=function(t,n,e){var o=JSON.parse(n);return this.plainToInstance(t,o,e)},r}(),ot=new Vt;function tt(r,t){return ot.instanceToPlain(r,t)}function Ft(r,t,n){return ot.plainToInstance(r,t,n)}var st=function(){function r(t){this.groups=[],this.each=!1,this.context=void 0,this.type=t.type,this.name=t.name,this.target=t.target,this.propertyName=t.propertyName,this.constraints=t?.constraints,this.constraintCls=t.constraintCls,this.validationTypeOptions=t.validationTypeOptions,t.validationOptions&&(this.message=t.validationOptions.message,this.groups=t.validationOptions.groups,this.always=t.validationOptions.always,this.each=t.validationOptions.each,this.context=t.validationOptions.context)}return r}(),Dt=function(){function r(){}return r.prototype.transform=function(t){var n=[];return Object.keys(t.properties).forEach(function(e){t.properties[e].forEach(function(o){var i={message:o.message,groups:o.groups,always:o.always,each:o.each},s={type:o.type,name:o.name,target:t.name,propertyName:e,constraints:o.constraints,validationTypeOptions:o.options,validationOptions:i};n.push(new st(s))})}),n},r}();function kt(r){return r instanceof Map?Array.from(r.values()):Array.isArray(r)?r:Array.from(r)}function Bt(){if(typeof globalThis<"u")return globalThis;if(typeof global<"u")return global;if(typeof window<"u")return window;if(typeof self<"u")return self}function G(r){return r!==null&&typeof r=="object"&&typeof r.then=="function"}var jt=globalThis&&globalThis.__values||function(r){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&r[t],e=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&e>=r.length&&(r=void 0),{value:r&&r[e++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},nt=globalThis&&globalThis.__read||function(r,t){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var e=n.call(r),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=e.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}return i},Ut=globalThis&&globalThis.__spreadArray||function(r,t,n){if(n||arguments.length===2)for(var e=0,o=t.length,i;e<o;e++)(i||!(e in t))&&(i||(i=Array.prototype.slice.call(t,0,e)),i[e]=t[e]);return r.concat(i||Array.prototype.slice.call(t))},at=function(){function r(){this.validationMetadatas=new Map,this.constraintMetadatas=new Map}return Object.defineProperty(r.prototype,"hasValidationMetaData",{get:function(){return!!this.validationMetadatas.size},enumerable:!1,configurable:!0}),r.prototype.addValidationSchema=function(t){var n=this,e=new Dt().transform(t);e.forEach(function(o){return n.addValidationMetadata(o)})},r.prototype.addValidationMetadata=function(t){var n=this.validationMetadatas.get(t.target);n?n.push(t):this.validationMetadatas.set(t.target,[t])},r.prototype.addConstraintMetadata=function(t){var n=this.constraintMetadatas.get(t.target);n?n.push(t):this.constraintMetadatas.set(t.target,[t])},r.prototype.groupByPropertyName=function(t){var n={};return t.forEach(function(e){n[e.propertyName]||(n[e.propertyName]=[]),n[e.propertyName].push(e)}),n},r.prototype.getTargetValidationMetadatas=function(t,n,e,o,i){var s,a,c=function(h){return typeof h.always<"u"?h.always:h.groups&&h.groups.length?!1:e},u=function(h){return!!(o&&(!i||!i.length)&&h.groups&&h.groups.length)},p=this.validationMetadatas.get(t)||[],l=p.filter(function(h){return h.target!==t&&h.target!==n?!1:c(h)?!0:u(h)?!1:i&&i.length>0?h.groups&&!!h.groups.find(function(d){return i.indexOf(d)!==-1}):!0}),f=[];try{for(var M=jt(this.validationMetadatas.entries()),_=M.next();!_.done;_=M.next()){var N=nt(_.value,2),g=N[0],m=N[1];t.prototype instanceof g&&f.push.apply(f,Ut([],nt(m),!1))}}catch(h){s={error:h}}finally{try{_&&!_.done&&(a=M.return)&&a.call(M)}finally{if(s)throw s.error}}var v=f.filter(function(h){return typeof h.target=="string"||h.target===t||h.target instanceof Function&&!(t.prototype instanceof h.target)?!1:c(h)?!0:u(h)?!1:i&&i.length>0?h.groups&&!!h.groups.find(function(d){return i.indexOf(d)!==-1}):!0}),x=v.filter(function(h){return!l.find(function(d){return d.propertyName===h.propertyName&&d.type===h.type})});return l.concat(x)},r.prototype.getTargetValidatorConstraints=function(t){return this.constraintMetadatas.get(t)||[]},r}();function z(){var r=Bt();return r.classValidatorMetadataStorage||(r.classValidatorMetadataStorage=new at),r.classValidatorMetadataStorage}var et=function(){function r(){}return r.prototype.toString=function(t,n,e,o){var i=this;t===void 0&&(t=!1),n===void 0&&(n=!1),e===void 0&&(e=""),o===void 0&&(o=!1);var s=t?"\x1B[1m":"",a=t?"\x1B[22m":"",c=function(){var l;return(o?Object.values:Object.keys)((l=i.constraints)!==null&&l!==void 0?l:{}).join(", ")},u=function(l){return" - property ".concat(s).concat(e).concat(l).concat(a," has failed the following constraints: ").concat(s).concat(c()).concat(a,` 
`)};if(n){var p=Number.isInteger(+this.property)?"[".concat(this.property,"]"):"".concat(e?".":"").concat(this.property);return this.constraints?u(p):this.children?this.children.map(function(l){return l.toString(t,!0,"".concat(e).concat(p),o)}).join(""):""}else return"An instance of ".concat(s).concat(this.target?this.target.constructor.name:"an object").concat(a,` has failed the validation:
`)+(this.constraints?u(this.property):"")+(this.children?this.children.map(function(l){return l.toString(t,!0,i.property,o)}).join(""):"")},r}(),b=function(){function r(){}return r.isValid=function(t){var n=this;return t!=="isValid"&&t!=="getMessage"&&Object.keys(this).map(function(e){return n[e]}).indexOf(t)!==-1},r.CUSTOM_VALIDATION="customValidation",r.NESTED_VALIDATION="nestedValidation",r.PROMISE_VALIDATION="promiseValidation",r.CONDITIONAL_VALIDATION="conditionalValidation",r.WHITELIST="whitelistValidation",r.IS_DEFINED="isDefined",r}();function Gt(r){return Array.isArray(r)?r.join(", "):(typeof r=="symbol"&&(r=r.description),"".concat(r))}var Rt=function(){function r(){}return r.replaceMessageSpecialTokens=function(t,n){var e;return t instanceof Function?e=t(n):typeof t=="string"&&(e=t),e&&Array.isArray(n.constraints)&&n.constraints.forEach(function(o,i){e=e.replace(new RegExp("\\$constraint".concat(i+1),"g"),Gt(o))}),e&&n.value!==void 0&&n.value!==null&&typeof n.value=="string"&&(e=e.replace(/\$value/g,n.value)),e&&(e=e.replace(/\$property/g,n.property)),e&&(e=e.replace(/\$target/g,n.targetName)),e},r}(),V=globalThis&&globalThis.__read||function(r,t){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var e=n.call(r),o,i=[],s;try{for(;(t===void 0||t-- >0)&&!(o=e.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=e.return)&&n.call(e)}finally{if(s)throw s.error}}return i},rt=function(){function r(t,n){this.validator=t,this.validatorOptions=n,this.awaitingPromises=[],this.ignoreAsyncValidations=!1,this.metadataStorage=z()}return r.prototype.execute=function(t,n,e){var o=this,i,s;!this.metadataStorage.hasValidationMetaData&&((i=this.validatorOptions)===null||i===void 0?void 0:i.enableDebugMessages)===!0&&console.warn(`No validation metadata found. No validation will be  performed. There are multiple possible reasons:
  - There may be multiple class-validator versions installed. You will need to flatten your dependencies to fix the issue.
  - This validation runs before any file with validation decorator was parsed by NodeJS.`);var a=this.validatorOptions?this.validatorOptions.groups:void 0,c=this.validatorOptions&&this.validatorOptions.strictGroups||!1,u=this.validatorOptions&&this.validatorOptions.always||!1,p=((s=this.validatorOptions)===null||s===void 0?void 0:s.forbidUnknownValues)===void 0||this.validatorOptions.forbidUnknownValues!==!1,l=this.metadataStorage.getTargetValidationMetadatas(t.constructor,n,u,c,a),f=this.metadataStorage.groupByPropertyName(l);if(this.validatorOptions&&p&&!l.length){var M=new et;(!this.validatorOptions||!this.validatorOptions.validationError||this.validatorOptions.validationError.target===void 0||this.validatorOptions.validationError.target===!0)&&(M.target=t),M.value=void 0,M.property=void 0,M.children=[],M.constraints={unknownValue:"an unknown value was passed to the validate function"},e.push(M);return}this.validatorOptions&&this.validatorOptions.whitelist&&this.whitelist(t,f,e),Object.keys(f).forEach(function(_){var N=t[_],g=f[_].filter(function(v){return v.type===b.IS_DEFINED}),m=f[_].filter(function(v){return v.type!==b.IS_DEFINED&&v.type!==b.WHITELIST});N instanceof Promise&&m.find(function(v){return v.type===b.PROMISE_VALIDATION})?o.awaitingPromises.push(N.then(function(v){o.performValidations(t,v,_,g,m,e)})):o.performValidations(t,N,_,g,m,e)})},r.prototype.whitelist=function(t,n,e){var o=this,i=[];Object.keys(t).forEach(function(s){(!n[s]||n[s].length===0)&&i.push(s)}),i.length>0&&(this.validatorOptions&&this.validatorOptions.forbidNonWhitelisted?i.forEach(function(s){var a,c=o.generateValidationError(t,t[s],s);c.constraints=(a={},a[b.WHITELIST]="property ".concat(s," should not exist"),a),c.children=void 0,e.push(c)}):i.forEach(function(s){return delete t[s]}))},r.prototype.stripEmptyErrors=function(t){var n=this;return t.filter(function(e){if(e.children&&(e.children=n.stripEmptyErrors(e.children)),Object.keys(e.constraints).length===0){if(e.children.length===0)return!1;delete e.constraints}return!0})},r.prototype.performValidations=function(t,n,e,o,i,s){var a=i.filter(function(f){return f.type===b.CUSTOM_VALIDATION}),c=i.filter(function(f){return f.type===b.NESTED_VALIDATION}),u=i.filter(function(f){return f.type===b.CONDITIONAL_VALIDATION}),p=this.generateValidationError(t,n,e);s.push(p);var l=this.conditionalValidations(t,n,u);l&&(this.customValidations(t,n,o,p),this.mapContexts(t,n,o,p),!(n===void 0&&this.validatorOptions&&this.validatorOptions.skipUndefinedProperties===!0)&&(n===null&&this.validatorOptions&&this.validatorOptions.skipNullProperties===!0||n==null&&this.validatorOptions&&this.validatorOptions.skipMissingProperties===!0||(this.customValidations(t,n,a,p),this.nestedValidations(n,c,p),this.mapContexts(t,n,i,p),this.mapContexts(t,n,a,p))))},r.prototype.generateValidationError=function(t,n,e){var o=new et;return(!this.validatorOptions||!this.validatorOptions.validationError||this.validatorOptions.validationError.target===void 0||this.validatorOptions.validationError.target===!0)&&(o.target=t),(!this.validatorOptions||!this.validatorOptions.validationError||this.validatorOptions.validationError.value===void 0||this.validatorOptions.validationError.value===!0)&&(o.value=n),o.property=e,o.children=[],o.constraints={},o},r.prototype.conditionalValidations=function(t,n,e){return e.map(function(o){return o.constraints[0](t,n)}).reduce(function(o,i){return o&&i},!0)},r.prototype.customValidations=function(t,n,e,o){var i=this;e.forEach(function(s){i.metadataStorage.getTargetValidatorConstraints(s.constraintCls).forEach(function(a){if(!(a.async&&i.ignoreAsyncValidations)&&!(i.validatorOptions&&i.validatorOptions.stopAtFirstError&&Object.keys(o.constraints||{}).length>0)){var c={targetName:t.constructor?t.constructor.name:void 0,property:s.propertyName,object:t,value:n,constraints:s.constraints};if(!s.each||!(Array.isArray(n)||n instanceof Set||n instanceof Map)){var u=a.instance.validate(n,c);if(G(u)){var p=u.then(function(d){if(!d){var O=V(i.createValidationError(t,n,s,a),2),T=O[0],S=O[1];o.constraints[T]=S,s.context&&(o.contexts||(o.contexts={}),o.contexts[T]=Object.assign(o.contexts[T]||{},s.context))}});i.awaitingPromises.push(p)}else if(!u){var l=V(i.createValidationError(t,n,s,a),2),f=l[0],M=l[1];o.constraints[f]=M}return}var _=kt(n),N=_.map(function(d){return a.instance.validate(d,c)}),g=N.some(function(d){return G(d)});if(g){var m=N.map(function(d){return G(d)?d:Promise.resolve(d)}),v=Promise.all(m).then(function(d){var O=d.every(function(F){return F});if(!O){var T=V(i.createValidationError(t,n,s,a),2),S=T[0],U=T[1];o.constraints[S]=U,s.context&&(o.contexts||(o.contexts={}),o.contexts[S]=Object.assign(o.contexts[S]||{},s.context))}});i.awaitingPromises.push(v);return}var x=N.every(function(d){return d});if(!x){var h=V(i.createValidationError(t,n,s,a),2),f=h[0],M=h[1];o.constraints[f]=M}}})})},r.prototype.nestedValidations=function(t,n,e){var o=this;t!==void 0&&n.forEach(function(i){if(!(i.type!==b.NESTED_VALIDATION&&i.type!==b.PROMISE_VALIDATION)&&!(o.validatorOptions&&o.validatorOptions.stopAtFirstError&&Object.keys(e.constraints||{}).length>0))if(Array.isArray(t)||t instanceof Set||t instanceof Map){var s=t instanceof Set?Array.from(t):t;s.forEach(function(l,f){o.performValidations(t,l,f.toString(),[],n,e.children)})}else if(t instanceof Object){var a=typeof i.target=="string"?i.target:i.target.name;o.execute(t,a,e.children)}else{var c=V(o.createValidationError(i.target,t,i),2),u=c[0],p=c[1];e.constraints[u]=p}})},r.prototype.mapContexts=function(t,n,e,o){var i=this;return e.forEach(function(s){if(s.context){var a=void 0;if(s.type===b.CUSTOM_VALIDATION){var c=i.metadataStorage.getTargetValidatorConstraints(s.constraintCls);a=c[0]}var u=i.getConstraintType(s,a);o.constraints[u]&&(o.contexts||(o.contexts={}),o.contexts[u]=Object.assign(o.contexts[u]||{},s.context))}})},r.prototype.createValidationError=function(t,n,e,o){var i=t.constructor?t.constructor.name:void 0,s=this.getConstraintType(e,o),a={targetName:i,property:e.propertyName,object:t,value:n,constraints:e.constraints},c=e.message||"";!e.message&&(!this.validatorOptions||this.validatorOptions&&!this.validatorOptions.dismissDefaultMessages)&&o&&o.instance.defaultMessage instanceof Function&&(c=o.instance.defaultMessage(a));var u=Rt.replaceMessageSpecialTokens(c,a);return[s,u]},r.prototype.getConstraintType=function(t,n){var e=n&&n.name?n.name:t.type;return e},r}(),zt=globalThis&&globalThis.__awaiter||function(r,t,n,e){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(p){try{u(e.next(p))}catch(l){s(l)}}function c(p){try{u(e.throw(p))}catch(l){s(l)}}function u(p){p.done?i(p.value):o(p.value).then(a,c)}u((e=e.apply(r,t||[])).next())})},$t=globalThis&&globalThis.__generator||function(r,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,o,i,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(p){return c([u,p])}}function c(u){if(e)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(e=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(r,n)}catch(p){u=[6,p],o=0}finally{e=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},it=function(){function r(){}return r.prototype.validate=function(t,n,e){return this.coreValidate(t,n,e)},r.prototype.validateOrReject=function(t,n,e){return zt(this,void 0,void 0,function(){var o;return $t(this,function(i){switch(i.label){case 0:return[4,this.coreValidate(t,n,e)];case 1:return o=i.sent(),o.length?[2,Promise.reject(o)]:[2]}})})},r.prototype.validateSync=function(t,n,e){var o=typeof t=="string"?n:t,i=typeof t=="string"?e:n,s=typeof t=="string"?t:void 0,a=new rt(this,i);a.ignoreAsyncValidations=!0;var c=[];return a.execute(o,s,c),a.stripEmptyErrors(c)},r.prototype.coreValidate=function(t,n,e){var o=typeof t=="string"?n:t,i=typeof t=="string"?e:n,s=typeof t=="string"?t:void 0,a=new rt(this,i),c=[];return a.execute(o,s,c),Promise.all(a.awaitingPromises).then(function(){return a.stripEmptyErrors(c)})},r}(),Jt=new(function(){function r(){this.instances=[]}return r.prototype.get=function(t){var n=this.instances.find(function(e){return e.type===t});return n||(n={type:t,object:new t},this.instances.push(n)),n.object},r}());function B(r){return Jt.get(r)}var Ht=function(){function r(t,n,e){e===void 0&&(e=!1),this.target=t,this.name=n,this.async=e}return Object.defineProperty(r.prototype,"instance",{get:function(){return B(this.target)},enumerable:!1,configurable:!0}),r}();function qt(r){var t;if(r.validator instanceof Function){t=r.validator;var n=B(at).getTargetValidatorConstraints(r.validator);if(n.length>1)throw"More than one implementation of ValidatorConstraintInterface found for validator on: ".concat(r.target.name,":").concat(r.propertyName)}else{var e=r.validator;t=function(){function i(){}return i.prototype.validate=function(s,a){return e.validate(s,a)},i.prototype.defaultMessage=function(s){return e.defaultMessage?e.defaultMessage(s):""},i}(),z().addConstraintMetadata(new Ht(t,r.name,r.async))}var o={type:r.name&&b.isValid(r.name)?r.name:b.CUSTOM_VALIDATION,name:r.name,target:r.target,propertyName:r.propertyName,validationOptions:r.options,constraintCls:t,constraints:r.constraints};z().addValidationMetadata(new st(o))}function J(r,t){return function(n){var e=t&&t.each?"each value in ":"";return r(e,n)}}function H(r,t){return function(n,e){qt({name:r.name,target:n.constructor,propertyName:e,options:t,constraints:r.constraints,validator:r.validator})}}var Wt="isBoolean";function Yt(r){return r instanceof Boolean||typeof r=="boolean"}function Qt(r){return H({name:Wt,validator:{validate:function(t,n){return Yt(t)},defaultMessage:J(function(t){return t+"$property must be a boolean value"},r)}},r)}var Xt="isInt";function Zt(r){return typeof r=="number"&&Number.isInteger(r)}function Kt(r){return H({name:Xt,validator:{validate:function(t,n){return Zt(t)},defaultMessage:J(function(t){return t+"$property must be an integer number"},r)}},r)}var tn="isString";function nn(r){return r instanceof String||typeof r=="string"}function en(r){return H({name:tn,validator:{validate:function(t,n){return nn(t)},defaultMessage:J(function(t){return t+"$property must be a string"},r)}},r)}function rn(r,t,n){return typeof r=="string"?B(it).validateSync(r,t,n):B(it).validateSync(r,t)}const R=new Map,on=(r,t,n=!0)=>{const e=()=>{const s=localStorage.getItem(t);if(!s)return console.debug(t,": no saved data"),null;try{const a=JSON.parse(s),c=Ft(r,a),u=rn(c);if(u.length>0){if(n){const p=new r;u.forEach(l=>{const f=l.property;a[f]=p[f],localStorage.setItem(t,JSON.stringify(a))})}return n?a:null}return a}catch(a){return console.log(a),null}},o=R.get(t),i=o??lt(e()??tt(new r));return o||R.set(t,i),dt(()=>i,ft(s=>{localStorage.setItem(t,JSON.stringify(s))},400,{trailing:!0}),{deep:!0}),ht(()=>{localStorage.setItem(t,JSON.stringify(i))}),{storage:i,reset:()=>{Object.assign(i,tt(new r))},clear(){localStorage.removeItem(t)},destory(){R.delete(t)}}};var sn=Object.defineProperty,an=Object.getOwnPropertyDescriptor,q=(r,t,n,e)=>{for(var o=e>1?void 0:e?an(t,n):t,i=r.length-1,s;i>=0;i--)(s=r[i])&&(o=(e?s(t,n,o):s(o))||o);return e&&o&&sn(t,n,o),o};class j{fontSize=14;fontFamily='"Helvetica Neue","Luxi Sans","DejaVu Sans","Hiragino Sans GB","Microsoft Yahei",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Noto Color Emoji","Segoe UI Symbol","Android Emoji","EmojiSymbols"';autocorrect=!0}q([Kt()],j.prototype,"fontSize",2);q([en()],j.prototype,"fontFamily",2);q([Qt()],j.prototype,"autocorrect",2);const fn=$({props:{resetFn:{type:Function,required:!0}},setup(r){return()=>E(gt,{trigger:"hover"},{trigger(){return E(yt,{text:!0,class:"ml-2",onClick:()=>r.resetFn()},{default:()=>[E(St,{size:"20",class:"opacity-40 hover:opacity-100 transition-opacity duration-500"},{default:()=>[E(Ct,null,null)]})]})},default(){return"将会重置这些设定"}})}}),un={editor:"editor-pref",general:"editor-general"},Sn=()=>{const{storage:r,reset:t,destory:n}=on(j,un.general);return{general:{setting:r,resetSetting:t,Panel:$(()=>()=>E(vt,null,[E(Ot,{class:"!flex items-center !mt-0"},{default:()=>[Z("通用设置"),E(fn,{resetFn:t},null)]}),E(k,{label:"字体设定"},{default:()=>[E(At,{onInput:i=>void(r.fontFamily=i),value:r.fontFamily},null)]}),E(k,{label:"字号设定"},{default:()=>[E(xt,{onUpdateValue:i=>void(r.fontSize=i??14),value:r.fontSize},null)]}),E(k,{label:"注意: ",labelAlign:"right"},{default:()=>[E(mt,null,{default:()=>[Z("以上设定暂时不适于 Monaco Editor")]})]}),E(k,{label:"自动纠正标点"},{default:()=>[E(Mt,{value:r.autocorrect,onUpdateValue:i=>void(r.autocorrect=i)},null)]})]))},destory:()=>{n()}}};export{en as I,H as V,on as a,J as b,vn as e,gn as s,Sn as u};
